set -e -x

# Detect # of CPUs so make jobs can be parallelized
CPUS=`grep -c ^processor /proc/cpuinfo`

echo "Extracting python..."

mkdir -p ${BOSH_INSTALL_TARGET}/python3
cd ${BOSH_COMPILE_TARGET}/python
tar xzvf Python-3.4.3.tgz
cp -a ./* ${BOSH_INSTALL_TARGET}/python3

cd ${BOSH_INSTALL_TARGET}/python3
echo "Building python..."
pushd Python-3.4.3
  ./configure --prefix=${BOSH_INSTALL_TARGET}
  make -j${CPUS}
  make install
popd

